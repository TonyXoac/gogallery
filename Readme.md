# GoGallery

GoGallery as the name suggests is a web gallery software with a golang backend. It is driven of a filebase backend. ie collections/albums are folders with photos. The inspiration for this gallery is to provide a some of the functionaities of my old gallery cms Koken which has had no updates in over a year+ and had gone silent. *NOTE* that this is not a replacement for Koken just the very limited features I was using. 

The application uses react frontend and a seperate react dashboard that supports upload and managing photos in collections. 

Demo at https://gallery.exceptionerror.io 

## Screenshots

### Gallery
![Screenshot1](/docs/img1.jpg?raw=true "Gallery Image")
![Screenshot1](/docs/img2.jpg?raw=true "Gallery Image")

### Dashboard:

![Screenshot1](/docs/dashboard1.jpg?raw=true "Gallery Image")
![Screenshot1](/docs/dashboard2.png?raw=true "Gallery Image")


## Installation
Makefile to the rescue

### build all
```
    make
```
### build frontend
```
    make build-frontend
```
### build dashboard
```
    make build-dashboard
```
### build server
```
    make build-server
```


## Usage

Edit the config and change the name basepath and base folder that is used for scanning images

#### Dashboard login
Gogallery on first run will autocreate a admin accound with username `admin` and a 8 character autogenerated password which you will find in the log. Once loged in you can go to settings and user to set it

Dashboard url `%GALLERY_PATH/dashboard`

If you forget the admin password for any reason you can use the `gogallery --reset-admin` which will recrate the admin username and password


## Themes

Version 3.0 has support for users themes. The theme engine chosen is a version of handlebars  using the  https://github.com/mailgun/raymond rendering engine. It mainly inspired by themes written for the very popular blogging engine Ghost.io
 
All Themes will need to have the following pages in order for the site to work:
 - 404.hbs  
 - albums.hbs 
 - collections.hbs    
 - main.hbs 
 - photo.hbs

Optionally you can have a  *"default.hbs"* to define common heading and footers 
The engine has support for partials that can be stored in the subfolder partials and all other assests can be stored the assets folder. 

See the example theme **eastnor** for reference

### Caching 

The server implements its own caching layer after the page has been visited it will cache the page in memory so next load of that page becomes very quick this can produce 10X improvement of load times. 

The Cache gets invalidated if the server restarts or if you have made a change in the dashboard. 


## Caption Generation (Experimental)

There is support for automaitic caption generation of photos. To keep everything local we are using the Image Caption Generator from IBM https://github.com/IBM/MAX-Image-Caption-Generator From experiments this produces terrible captions and its being left in as a POC 

To enable it simply run the docker container and add set the GLLRY_SERVER_CAPTIONURL to the above container IP it will be in form http://172.17.0.2:5000/model/predict"

Now in the Dashboard when you edit the detail of a picture you will see a dropdown of some examples of what the caption generator through of the image. You can chose one or write your own.



#### Configuration 
Config can be also edited via environmental variables
 

```
GLLRY_SERVER_PORT
GLLRY_SERVER_WORKERS
GLLRY_SERVER_CAPTIONURL

GLLRY_DATABASE_BASEURL

GLLRY_GALLERY_NAME
GLLRY_GALLERY_BASEPATH
GLLRY_GALLERY_URL
GALLRY_GALLERY_THEME
GALLRY_GALLERY_PICTUREBLACKLIST
GALLRY_GALLERY_ALBUMBLACKLIST

GLLRY_ABOUT_INSTAGRAM
GLLRY_ABOUT_TWITTER
GLLRY_ABOUT_EMAIL

GLLRY_ABOUT_WEBSITE
GLLRY_ABOUT_DESCRIPTION
GLLRY_ABOUT_PHOTOGRAPHER
GLLRY_ABOUT_BACKGROUNDPHOTO
GLLRY_ABOUT_PROFILEPHOTO

```

## Contributing
Pull requests are welcome. For major changes, please open an issue first to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License
[MIT](https://choosealicense.com/licenses/mit/)
